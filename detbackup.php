<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
 	<meta http-equiv="content-type" content="text/html; charset=windows-1250">
  	<meta name="generator" content="PSPad editor, www.pspad.com">
  	<title></title>
         <link rel="StyleSheet" href="dtree.css" type="text/css" />
	<script type="text/javascript" src="dtree.js"></script>
	<script type="text/javascript" src="boxover.js"></script>
	
	
	
	
 <style>
 DIV {
 	COLOR: #000
 }
 TD {
 	COLOR: #000
 }
 .n A {
 	COLOR: #000
 }
 .n A:visited {
 	COLOR: #000
 }
 .ts TD {
 	PADDING-RIGHT: 0px; PADDING-LEFT: 0px; PADDING-BOTTOM: 0px; PADDING-TOP: 0px
 }
 .tc {
 	PADDING-RIGHT: 0px; PADDING-LEFT: 0px; PADDING-BOTTOM: 0px; PADDING-TOP: 0px
 }
 .ts {
 	BORDER-COLLAPSE: collapse
 }
 .tb {
 	BORDER-COLLAPSE: collapse
 }
 .ti {
 	DISPLAY: inline
 }
 .bl {
 	DISPLAY: inline
 }
 .ti {
 
 }
 .f {
 	COLOR: #666
 }
 .flc {
 	COLOR: #77c
 }
 A.fl {
 	COLOR: #77c
 }
 A {
 	COLOR: #00c
 }
 .w {
 	COLOR: #00c
 }
 .q:visited {
 	COLOR: #00c
 }
 .q:active {
 	COLOR: #00c
 }
 .q {
 	COLOR: #00c
 }
 .b A {
 	COLOR: #00c
 }
 .b A:visited {
 	COLOR: #00c
 }
 .mblink:visited {
 	COLOR: #00c
 }
 A:visited {
 	COLOR: #551a8b
 }
 A:active {
 	COLOR: red
 }
 .t {
 	PADDING-RIGHT: 1px; PADDING-LEFT: 1px; BACKGROUND: #d5ddf3; PADDING-BOTTOM: 4px; COLOR: #000; PADDING-TOP: 5px
 }
 .bb {
 	BORDER-BOTTOM: #36c 1px solid
 }
 .bt {
 	BORDER-TOP: #36c 1px solid
 }
 .j {
 	WIDTH: 34em
 }
 .h {
 	COLOR: #36c
 }
 .i {
 	COLOR: #a90a08
 }
 .a {
 	COLOR: green
 }
 .z {
 	DISPLAY: none
 }
 DIV.n {
 	MARGIN-TOP: 1ex
 }
 .n A {
 	FONT-SIZE: 10pt
 }
 .n .i {
 	FONT-SIZE: 10pt
 }
 .n .i {
 	FONT-WEIGHT: bold
 }
 .b A {
 	FONT-WEIGHT: bold
 }
 .b A {
 	FONT-SIZE: 12pt
 }
 #np {
 	CURSOR: hand
 }
 #nn {
 	CURSOR: hand
 }
 .nr {
 	CURSOR: hand
 }
 #logo SPAN {
 	CURSOR: hand
 }
 .ch {
 	CURSOR: hand
 }
 .ta {
 	PADDING-RIGHT: 3px; PADDING-LEFT: 5px; PADDING-BOTTOM: 3px; PADDING-TOP: 3px
 }
 #tpa2 {
 	PADDING-TOP: 9px
 }
 #tpa3 {
 	PADDING-TOP: 9px
 }
 #gbar {
 	PADDING-LEFT: 2px; FONT-WEIGHT: bold; FLOAT: left; HEIGHT: 22px
 }
 .gbh {
 	BORDER-TOP: #c9d7f1 1px solid; FONT-SIZE: 0px; HEIGHT: 0px
 }
 .gb2 DIV {
 	BORDER-TOP: #c9d7f1 1px solid; FONT-SIZE: 0px; HEIGHT: 0px
 }
 .gbh {
 	WIDTH: 100%;
 	POSITION: absolute;
 	TOP: 35px
 }
 .gb2 DIV {
 	MARGIN: 5px
 }
 #gbi {
 	BORDER-RIGHT: #36c 1px solid; BORDER-TOP: #c9d7f1 1px solid; FONT-SIZE: 13px; Z-INDEX: 1000; BACKGROUND: #fff; BORDER-LEFT: #a2bae7 1px solid; BORDER-BOTTOM: #36c 1px solid; TOP: 24px
 }
 #guser {
 	PADDING-BOTTOM: 7px! important
 }
 #gbar {
 	FONT-SIZE: 13px; PADDING-TOP: 1px! important
 }
 #guser {
 	FONT-SIZE: 13px; PADDING-TOP: 1px! important
 }
 
 @media All
 {
 .gb1 {
 	VERTICAL-ALIGN: top; MARGIN-RIGHT: 0.73em; HEIGHT: 22px
 }
 .gb3 {
 	VERTICAL-ALIGN: top; MARGIN-RIGHT: 0.73em; HEIGHT: 22px
 }
 .gb2 A {
 	PADDING-RIGHT: 0.5em; DISPLAY: block; PADDING-LEFT: 0.5em; PADDING-BOTTOM: 0.2em; PADDING-TOP: 0.2em
 }
     }
 #gbi {
 	DISPLAY: none; WIDTH: 8em; POSITION: absolute
 }
 .gb2 {
 	DISPLAY: none; WIDTH: 8em; POSITION: absolute
 }
 .gb2 {
 	Z-INDEX: 1001
 }
 #gbar A {
 	FONT-WEIGHT: normal; COLOR: #00c
 }
 #gbar A:active {
 	FONT-WEIGHT: normal; COLOR: #00c
 }
 #gbar A:visited {
 	FONT-WEIGHT: normal; COLOR: #00c
 }
 .gb2 A {
 	TEXT-DECORATION: none
 }
 .gb3 A {
 	TEXT-DECORATION: none
 }
 #gbar .gb2 A:hover {
 	DISPLAY: block; BACKGROUND: #36c; COLOR: #fff
 }
 .sl {
 	DISPLAY: inline; FONT-WEIGHT: normal; MARGIN: 0px
 }
 .r {
 	DISPLAY: inline; FONT-WEIGHT: normal; MARGIN: 0px
 }
 .sl {
 	FONT-SIZE: 84%
 }
 .r {
 	FONT-SIZE: 100%
 }
 .e {
 	MARGIN: 0.75em 0px
 }
 .sm {
 	DISPLAY: block; MARGIN: 0px 0px 0px 40px
 }
 .slk TD {
 	PADDING-LEFT: 40px; FONT-SIZE: 84%; VERTICAL-ALIGN: top; PADDING-TOP: 5px
 }
 .slk DIV {
 	PADDING-LEFT: 10px; TEXT-INDENT: -10px
 }
 .csb {
 	BACKGROUND: url(/images/nav_logo3.png) no-repeat; OVERFLOW: hidden; HEIGHT: 26px
 }
 .n DIV {
 	BACKGROUND: url(/images/nav_logo3.png) no-repeat; OVERFLOW: hidden; HEIGHT: 26px
 }
 #logo SPAN {
 	BACKGROUND: url(/images/nav_logo3.png) no-repeat; OVERFLOW: hidden; HEIGHT: 26px
 }
 .n .nr {
 	BACKGROUND-POSITION: -60px 0px; WIDTH: 20px; HEIGHT: 40px
 }
 #np {
 	WIDTH: 44px
 }
 #nf {
 	BACKGROUND-POSITION: -26px 0px; WIDTH: 29px; HEIGHT: auto
 }
 #x {
 	BACKGROUND-POSITION: -26px 0px; WIDTH: 30px; HEIGHT: auto
 }
 #nc {
 	BACKGROUND-POSITION: -44px 0px; WIDTH: 20px; HEIGHT: 40px
 }
 #ippet {
 	BACKGROUND-POSITION: -44px 0px; WIDTH: 70px; HEIGHT: 40px
 }
 #nn {
 	WIDTH: 66px; MARGIN-RIGHT: 34px
 }
 #nl {
 	WIDTH: 46px
 }
 #nn {
 	BACKGROUND-POSITION: -76px 0px
 }
 #nl {
 	BACKGROUND-POSITION: -76px 0px
 }
 #logo {
 	DISPLAY: block; MARGIN: 13px 0px 7px; OVERFLOW: hidden; WIDTH: 150px; POSITION: relative; HEIGHT: 52px
 }
 #logo SPAN {
 	BACKGROUND-POSITION: 0px -26px; LEFT: 0px; WIDTH: 100%; POSITION: absolute; TOP: 0px; HEIGHT: 100%
 }
 .ss {
 	DISPLAY: block; BACKGROUND: url(/images/nav_logo3.png) no-repeat 0px -87px; LEFT: 0px; OVERFLOW: hidden; POSITION: absolute; TOP: 0px
 }
 .cps {
 	OVERFLOW: hidden; WIDTH: 114px; HEIGHT: 18px
 }
 .mbi {
 	BACKGROUND-POSITION: -114px -78px; DISPLAY: block; WIDTH: 12px; MARGIN-RIGHT: 2px; HEIGHT: 12px
 }
 .mblink {
 	FONT-SIZE: 100%
 }
 BODY {
 	FONT-FAMILY: arial,sans-serif
 }
 TD {
 	FONT-FAMILY: arial,sans-serif
 }
 DIV {
 	FONT-FAMILY: arial,sans-serif
 }
 .p {
 	FONT-FAMILY: arial,sans-serif
 }
 A {
 	FONT-FAMILY: arial,sans-serif
 }
 .g {
 	MARGIN: 1em 10px
 }
 #sd {
 	FONT-WEIGHT: bold; FONT-SIZE: 84%
 }
 #ap {
 	FONT-SIZE: 64%
 }
 
 
 td.ATT
 { border-bottom: 1px #000000 dotted;
 border-top: 1px #000000 dotted;
 border-right: 1px dotted;
 text-align: left;
 font-family: Verdana, sans-serif, Arial;
 font-weight: normal;
 font-size: .7em;
 color: #FFFFFF;
  background-color: #151B54;
 padding-top: 4px;
 padding-bottom: 4px;
 padding-left: 8px;
 padding-right: 20px; 
 align:center;
}

.formcheck
 { border-bottom: 1px #000000 dotted;
 border-top: 1px #000000 dotted;
 border-right: 1px #000000 dotted;
 border-left: 1px #000000 dotted;
 text-align: left;
 font-family: Verdana, sans-serif, Arial;
 font-weight: bold;
 font-size: .7em;
 color: #000000;
  background-color: #FFFFFF;
 padding-top: 4px;
 padding-bottom: 4px;
 padding-left: 8px;
 padding-right: 20px; 
 align:center;
 width:auto;
}

 td.VAL
 { border-bottom: 1px #000000 dotted;
 border-top: 1px #000000 dotted;
 border-right: 1px dotted;
 text-align: left;
 font-family: Verdana, sans-serif, Arial;
 font-weight: normal;
 font-size: .7em;
 color: #000000;
  background-color: #FFFFFF;
 padding-top: 4px;
 padding-bottom: 4px;
 padding-left: 8px;
 padding-right: 20px; 
 align:center;
 width:400px;
}

 .subVAL
 {
 	
 	border-right: 1px #657383 solid;
 	background-color: #B7CEEC;
 	 padding-top: 4px;
 	 padding-bottom: 4px;
 	 padding-left: 8px;
  	padding-right: 20px;
  	width:400px;
}

 td.VAL2
 { border-bottom: 1px #000000 dotted;
 border-top: 1px #000000 dotted;
 border-right: 1px dotted;
 text-align: left;
 font-family: Verdana, sans-serif, Arial;
 font-weight: normal;
 font-size: .7em;
 color: #000000;
  background-color: #FFFFFF;
 padding-top: 4px;
 padding-bottom: 4px;
 padding-left: 8px;
 padding-right: 20px; 
 align:center;
 width:auto;
}

.heading
{
 	font-family: Verdana, sans-serif, Arial;
 	font-weight: bold;
 	font-size: 1em;
}

.morerows
 { border-bottom: 1px #747170 solid;
 border-top: 1px #747170 solid;
 border-right: 1px dotted;
 text-align: left;
 font-family: Verdana, sans-serif, Arial;
 font-weight: normal;
 font-size: .7em;
 color: #000000;
  background-color: #FFFFFF;
 padding-top: 4px;
 padding-bottom: 4px;
 padding-left: 8px;
 padding-right: 20px; 
 align:center;
}

.morecols
{
	
	border-right: 1px #747170 solid;
	background-color: #B7CEEC;
	 padding-top: 4px;
	 padding-bottom: 4px;
	 padding-left: 8px;
 	padding-right: 20px;
 	width:400px;
}

 </style>
 
 <script type="text/javascript">
 
 function toggle(t)
 {
 	cells = document.getElementsByName(t);
 	
 	if(cells[0].style.display == 'none')
 	{
		for(j = 0; j < cells.length; j++) 
		{
			cells[j].style.display = 'block';
		}
	}
	else
	{
		for(j = 0; j < cells.length; j++) 
		{
			cells[j].style.display = 'none';
		}
	}

 }
 
 function toggle1(chkbox,tbl)
 {
 	table = document.getElementById(tbl);
 	rows = table.getElementsByTagName("tr"); 
 	term = chkbox.value;
 	
 	for(i=0;i<rows.length;i++)
 	{
 		cols = rows[i].getElementsByTagName("td");
 		
 		if(cols[1].innerHTML.indexOf(term)!=-1 && cols[1].style.display == 'none' && chkbox.checked==true)
 		{
 			var nm = cols[1].id;
 			cells = document.getElementsByName(nm);
 			
 			for(j = 0; j < cells.length; j++) 
			{
				
				cells[j].style.display = 'block';
			}
 		}
 		else if(cols[1].innerHTML.indexOf(term)!=-1 && cols[1].style.display != 'none' && chkbox.checked==false)
		 {
		 	var nm = cols[1].id;
		 	cells = document.getElementsByName(nm);
		 	for(j = 0; j < cells.length; j++) 
			{
				cells[j].style.display = 'none';
			}
 		}
 	}
 }
 
 </script>
 </head>
  <body>
	<?php
		$timestamp = $_GET['timestamp'];
		if(isset($_GET['num'])) {
			$selectedResult = $_GET['num'];
		}
		
		exec("GenSnippetTree.exe details ".$selectedResult." ".$timestamp);	
		//include($selectedResult . ".detail");		
		
		$dfile = "sr\\".$selectedResult."_".$timestamp.".detail";
		$detailfile = file_get_contents($dfile);		
		$line = explode("\n",$detailfile);
		
		
		$p = explode(",",$line[0]);
		
		$root = $p[2];
		$idmap = array();
		$idmap[-1] = trim($root);
		$curparent = trim($root);		
		
		$sameatt = array();
		
		if(trim($curparent)=="author" || trim($curparent)=="conference" || trim($curparent)=="RESULT")
		{
		echo '<table><tr><td>
				
		<table id="mtbl" name="mtbl">';
		
		$year = array();
		$indext = array();
		$session = array();
		$authors = array();
		
			$cur = 0;
			for($i=1;$i<count($line);$i++)
			{
				$parts = explode(",",trim($line[$i]));				
				$text = explode(":", trim($parts[2]));
				
				$curparent = $idmap[$parts[1]];
				
				if(count($text)==2)
				{
					if(trim($text[0])=="title")
					{
						
						$keys = array_keys($sameatt);
						
						if(array_key_exists("year", $sameatt))
						{
							$val = $sameatt["year"];														
														
							echo '<tr class="morerows" >
							<td ></td>
							<td class="subVAL" value="'.ucfirst("year").'"><b>'.ucfirst("year").' :</b> '.ucfirst($val).'</td>
							<td ></td>
						      	</tr>'; 
						      	
						      	unset($sameatt["year"]);
						}
						
						if(array_key_exists("name", $sameatt))
						{
							$val = $sameatt["name"];														
														
							echo '<tr class="morerows" >
							<td ></td>
							<td class="subVAL" value="'.ucfirst("author").'"><b>'.ucfirst("author").' :</b> '.ucfirst($val).'</td>
							<td ></td>
						      	</tr>'; 
						      	
						      	unset($sameatt["name"]);
						}
						
						if(array_key_exists("venue", $sameatt))
						{
							$val = $sameatt["venue"];														
														
							echo '<tr class="morerows" >
							<td ></td>
							<td class="subVAL" value="'.ucfirst("venue").'"><b>'.ucfirst("venue").' :</b> '.ucfirst($val).'</td>
							<td ></td>
						      	</tr>'; 
						      	
						      	unset($sameatt["venue"]);
						}
						
						for($j=0;$j<count($keys);$j++)
						{
							$val = $sameatt[$keys[$j]];
							
							
							echo '<tr class="morerows" >
								<td style="display:none" name="t'.$cur.'" id="t'.$cur.'"></td>
								<td class="morecols" style="display:none" name="t'.$cur.'" id="t'.$cur.'" value="'.ucfirst($keys[$j]).'"><b>'.ucfirst($keys[$j]).' :</b> '.ucfirst($val).'</td>
								<td style="display:none" name="t'.$cur.'" id="t'.$cur.'"></td>
						      	</tr>'; 
						      	
						}
						
						$sameatt = array();
						
						$cur++;
						echo '
						<tr>
						<td class="ATT">'.trim($curparent).'</td>
						<td class="VAL"><b>'.ucfirst($text[0]).' :</b> '.ucfirst($text[1]).'</td>
						<td class="VAL2"><a href="javascript:toggle(\'t'.$cur.'\')">Show More...</a></td>
						</tr>';						
			
					}
					else
					{
						
						if( array_key_exists(trim($text[0]), $sameatt) )
						{
							$sameatt[trim($text[0])] .= ", ".ucfirst(trim($text[1]));
							if(trim($text[0])=="year")
							{
								$year[trim($text[1])] = $year[trim($text[1])]++;
							}
							else if(trim($text[0])=="indexterm")
							{
								$indext[trim($text[1])] = $indext[trim($text[1])]++;
							}
							else if(trim($text[0])=="session")
							{
								$session[trim($text[1])] = $session[trim($text[1])]++;
							}
							else if(trim($text[0])=="name")
							{
								$authors[trim($text[1])] = $authors[trim($text[1])]++;
							}
						}
						else
						{
							$sameatt[trim($text[0])] = ucfirst(trim($text[1]));
							if(trim($text[0])=="year")
							{
								$year[$text[1]] = 1;
							}
							else if(trim($text[0])=="indexterm")
							{
								$indext[$text[1]] = 1;
							}
							else if(trim($text[0])=="session")
							{
								$session[$text[1]] = 1;
							}
							else if(trim($text[0])=="name")
							{
								$authors[$text[1]] = 1;
							}
						}
						
					}
				}
				else if(count($text)==1)
				{
					$idmap[$parts[0]] = $text[0];
					//$curparent = trim($text[0]);
				}
			}
			
			$keys = array_keys($sameatt);
			for($j=0;$j<count($keys);$j++)
			{
				$val = $sameatt[$keys[$j]];							
				echo '<tr class="morerows" >
				<td style="display:none" name="t'.$cur.'" id="t'.$cur.'"></td>
				<td class="morecols" style="display:none" name="t'.$cur.'" id="t'.$cur.'" value="'.ucfirst($keys[$j]).'"><b>'.ucfirst($keys[$j]).' :</b> '.ucfirst($val).'</td>
				<td style="display:none" name="t'.$cur.'" id="t'.$cur.'"></td>
			      	</tr>'; 
			}
						
		
		echo '</table></td><td valign="top" >';
		
		echo '<br></br><br></br><br></br>';
		
		if(count($year)>0)
		{
			echo '<div class="formcheck" style="margin-left:100px"> <b>Year:</b><br/>';		
		
			asort($year);		
			$yrk = array_keys($year);
			$cnt = (count($yrk)>5)?5:count($yrk);
			for($y=0;$y<$cnt;$y++)
			{
				echo '<input  type="checkbox" onClick="javascript:toggle1(this, \'mtbl\')" value="'.$yrk[$y].'">'.$yrk[$y].'</input><br/>';
			}
			echo '</div>';
		}
		
		echo '<br></br>';
		
		if(count($indext)>0)
		{
			echo '<div class="formcheck" style="margin-left:100px"><b>Top Index Terms:</b><br/>';
			asort($indext);		
			$ink = array_keys($indext);
			$cnt = (count($ink)>5)?5:count($ink);
			for($y=0;$y<$cnt;$y++)
			{
				echo '<input  type="checkbox" onClick="javascript:toggle1(this, \'mtbl\')" value="'.ucfirst($ink[$y]).'">'.ucfirst($ink[$y]).'</input><br/>';
			}		
			echo '</div>';		
			
			
		}
		
		
		echo '<br></br>';
				
		if(count($session)>0)
		{
			echo '<div class="formcheck" style="margin-left:100px"><b>Session:</b><br/>';
			asort($session);		
			$ink = array_keys($session);
			$cnt = (count($ink)>5)?5:count($ink);
			for($y=0;$y<$cnt;$y++)
			{
				echo '<input  type="checkbox" onClick="javascript:toggle1(this, \'mtbl\')" value="'.ucfirst($ink[$y]).'">'.ucfirst($ink[$y]).'</input><br/>';
			}		
			echo '</div>';		
			
					
		}
		
		echo '<br></br>';
						
		if(count($authors)>0)
		{
			echo '<div class="formcheck" style="margin-left:100px"><b>Authors:</b><br/>';
			asort($authors);		
			$ink = array_keys($authors);
			$cnt = (count($ink)>5)?5:count($ink);
			for($y=0;$y<$cnt;$y++)
			{
				echo '<input  type="checkbox" onClick="javascript:toggle1(this, \'mtbl\')" value="'.ucfirst($ink[$y]).'">'.ucfirst($ink[$y]).'</input><br/>';
			}		
			echo '</div>';		
									
		}
		echo '</td></tr></table>';	
		}
		
		else
		{
			for($i=1;$i<count($line);$i++)
			{
				$parts = explode(",",trim($line[$i]));
			
				$text = explode(":", trim($parts[2]));
				if(count($text)==2) //if it is a attribute-value pair.
				{
				
					if( array_key_exists(trim($text[0]), $sameatt) )
					{
						$sameatt[trim($text[0])] .= ", ".trim($text[1]);
					}
					else
					{
						$sameatt[trim($text[0])] = trim($text[1]);
					}
											
				}
			}
			
			
			$keys = array_keys($sameatt);
			for($j=0;$j<count($keys);$j++)
			{
			
				$val = $sameatt[$keys[$j]];
				echo '<div class="heading">'.ucfirst($keys[$j]).' - '.ucfirst($val).'</div>';	
				echo '<div></div>';	
			}						
		}
		
		
		
		
		
		?>		

			
	
	
	
	
	
  </body>
 </html>